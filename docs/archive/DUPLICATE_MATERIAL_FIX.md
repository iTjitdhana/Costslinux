# ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏õ‡∏±‡∏ç‡∏´‡∏≤ Material ID ‡∏ã‡πâ‡∏≥‡∏Å‡∏±‡∏ô

> [ARCHIVED] Historical reference. Not required for handover. See `docs/README.md`.

## üîç **‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ó‡∏µ‡πà‡∏û‡∏ö**

### ‡∏à‡∏≤‡∏Å‡∏†‡∏≤‡∏û‡∏ó‡∏µ‡πà‡πÅ‡∏™‡∏î‡∏á ‡∏°‡∏µ‡∏£‡∏´‡∏±‡∏™ `235073` ‡∏ã‡πâ‡∏≥‡∏Å‡∏±‡∏ô:
- **‡πÅ‡∏ñ‡∏ß‡∏ó‡∏µ‡πà 1**: Type `I` (FG) - ‡∏£‡∏´‡∏±‡∏™ `235073` ‡∏ô‡πâ‡∏≥‡∏à‡∏¥‡πâ‡∏°‡∏™‡∏∏‡∏Å‡∏µ‡πâ
- **‡πÅ‡∏ñ‡∏ß‡∏ó‡∏µ‡πà 7**: Type `O` (Raw Material) - ‡∏£‡∏´‡∏±‡∏™ `235073` ‡∏ô‡πâ‡∏≥‡∏à‡∏¥‡πâ‡∏°‡∏™‡∏∏‡∏Å‡∏µ‡πâ

## ‚úÖ **‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏õ‡∏±‡∏ç‡∏´‡∏≤**

### ‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏‡∏Ç‡∏≠‡∏á‡∏õ‡∏±‡∏ç‡∏´‡∏≤:
1. **API ‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô 11 records**: 1 FG + 10 Raw Materials
2. **FG record**: `{"Raw_Code":"235073","is_fg":"1"}` - ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡∏£‡∏π‡∏õ
3. **Raw Material records**: ‡∏°‡∏≤‡∏à‡∏≤‡∏Å `fg_bom` table (10 records)
4. **Frontend ‡πÑ‡∏°‡πà‡∏Å‡∏£‡∏≠‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ã‡πâ‡∏≥**: ‡πÅ‡∏™‡∏î‡∏á‡∏ó‡∏±‡πâ‡∏á FG ‡πÅ‡∏•‡∏∞ Raw Material ‡∏ó‡∏µ‡πà‡∏°‡∏µ material_id ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô

### ‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Database:
```sql
-- fg_bom table ‡∏°‡∏µ 10 records
SELECT Raw_Code, FG_Code FROM fg_bom WHERE FG_Code = '235073'
-- ‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå: ‡πÑ‡∏°‡πà‡∏°‡∏µ Raw_Code ‡∏ó‡∏µ‡πà‡∏ã‡πâ‡∏≥‡∏Å‡∏±‡∏ö FG_Code

-- ‡πÅ‡∏ï‡πà API ‡∏£‡∏ß‡∏° FG record ‡πÄ‡∏Ç‡πâ‡∏≤‡πÑ‡∏õ ‚Üí 11 records
-- Frontend ‡πÅ‡∏™‡∏î‡∏á‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î ‚Üí ‡πÄ‡∏Å‡∏¥‡∏î‡∏Å‡∏≤‡∏£‡∏ã‡πâ‡∏≥
```

## ‚úÖ **‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ó‡∏µ‡πà‡∏ó‡∏≥**

### 1. ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ó‡∏µ‡πà Backend (‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ú‡∏•)
```sql
-- ‚ùå ‡∏û‡∏¢‡∏≤‡∏¢‡∏≤‡∏°‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ó‡∏µ‡πà Backend ‡πÅ‡∏ï‡πà‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ú‡∏•
WHERE fb.FG_Code = ? AND fb.Raw_Code != fb.FG_Code
```

### 2. ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ó‡∏µ‡πà Frontend (‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ)
```javascript
// ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡∏Å‡∏£‡∏≠‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ã‡πâ‡∏≥‡πÉ‡∏ô frontend
const uniqueBom = [];
const seenMaterialIds = new Set();

bom.forEach(item => {
    if (!seenMaterialIds.has(item.material_id)) {
        seenMaterialIds.add(item.material_id);
        uniqueBom.push(item);
    } else {
        console.log(`Duplicate material_id found: ${item.material_id} (${item.Mat_Name})`);
    }
});

console.log(`Removed ${bom.length - uniqueBom.length} duplicate items`);
replace(uniqueBom);
```

## üß™ **‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏´‡∏•‡∏±‡∏á‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç**

### 1. ‡πÄ‡∏õ‡∏¥‡∏î‡∏´‡∏ô‡πâ‡∏≤ http://localhost:3014/inventory
### 2. ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏á‡∏≤‡∏ô 235073 (‡∏ô‡πâ‡∏≥‡∏à‡∏¥‡πâ‡∏°‡∏™‡∏∏‡∏Å‡∏µ‡πâ)
### 3. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Console Logs:

```
BOM item: ‡∏ô‡πâ‡∏≥‡∏à‡∏¥‡πâ‡∏°‡∏™‡∏∏‡∏Å‡∏µ‡πâ, material_id: 235073, type: number
BOM item: ‡∏Å‡∏£‡∏∞‡πÄ‡∏ó‡∏µ‡∏¢‡∏°‡πÅ‡∏Å‡∏∞‡∏Å‡∏•‡∏µ‡∏ö - CT, material_id: 507003, type: number
...
Duplicate material_id found: 235073 (‡∏ô‡πâ‡∏≥‡∏à‡∏¥‡πâ‡∏°‡∏™‡∏∏‡∏Å‡∏µ‡πâ)
Removed 1 duplicate items
BOM data before replace: [10 unique items]
```

### 4. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•:
- ‚úÖ ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏´‡∏±‡∏™‡∏ã‡πâ‡∏≥
- ‚úÖ ‡πÅ‡∏™‡∏î‡∏á 10 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ (‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà 11)
- ‚úÖ FG ‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏õ‡πá‡∏ô Type `I` 
- ‚úÖ Raw Materials ‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏õ‡πá‡∏ô Type `O`

## üéØ **‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡∏´‡∏•‡∏±‡∏á‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç**

### ‡∏Å‡πà‡∏≠‡∏ô‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç:
```
1. I  235073  ‡∏ô‡πâ‡∏≥‡∏à‡∏¥‡πâ‡∏°‡∏™‡∏∏‡∏Å‡∏µ‡πâ
2. O  507003  ‡∏Å‡∏£‡∏∞‡πÄ‡∏ó‡∏µ‡∏¢‡∏°‡πÅ‡∏Å‡∏∞‡∏Å‡∏•‡∏µ‡∏ö - CT
...
7. O  235073  ‡∏ô‡πâ‡∏≥‡∏à‡∏¥‡πâ‡∏°‡∏™‡∏∏‡∏Å‡∏µ‡πâ  ‚Üê ‡∏ã‡πâ‡∏≥
```

### ‡∏´‡∏•‡∏±‡∏á‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç:
```
1. I  235073  ‡∏ô‡πâ‡∏≥‡∏à‡∏¥‡πâ‡∏°‡∏™‡∏∏‡∏Å‡∏µ‡πâ
2. O  507003  ‡∏Å‡∏£‡∏∞‡πÄ‡∏ó‡∏µ‡∏¢‡∏°‡πÅ‡∏Å‡∏∞‡∏Å‡∏•‡∏µ‡∏ö - CT
...
10. O  207010  ‡∏û‡∏£‡∏¥‡∏Å‡∏Ç‡∏µ‡πâ‡∏´‡∏ô‡∏π‡πÅ‡∏î‡∏á
```

## üìÅ **‡πÑ‡∏ü‡∏•‡πå‡∏ó‡∏µ‡πà‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç**

1. **frontend/src/pages/InventoryData.js**
   - ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡∏Å‡∏£‡∏≠‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ã‡πâ‡∏≥‡πÉ‡∏ô `loadBOMByJobCode`
   - ‡πÉ‡∏ä‡πâ `Set` ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏° material_id ‡∏ó‡∏µ‡πà‡πÄ‡∏´‡πá‡∏ô‡πÅ‡∏•‡πâ‡∏ß
   - ‡πÄ‡∏û‡∏¥‡πà‡∏° console.logs ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö debug

## ‚ö†Ô∏è **‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏**

- ‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ô‡∏µ‡πâ‡∏à‡∏∞‡∏Å‡∏£‡∏≠‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ã‡πâ‡∏≥‡∏ó‡∏µ‡πà‡∏°‡∏µ `material_id` ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô
- ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÅ‡∏£‡∏Å‡∏ó‡∏µ‡πà‡∏û‡∏ö‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡πÄ‡∏Å‡πá‡∏ö‡πÑ‡∏ß‡πâ (FG ‡∏à‡∏∞‡∏°‡∏≤‡∏Å‡πà‡∏≠‡∏ô Raw Material)
- Toast message ‡∏à‡∏∞‡πÅ‡∏™‡∏î‡∏á‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏´‡∏•‡∏±‡∏á‡∏Å‡∏£‡∏≠‡∏á

## üîß **‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á Algorithm**

### Deduplication Logic:
1. **‡∏™‡∏£‡πâ‡∏≤‡∏á Set ‡πÄ‡∏õ‡∏•‡πà‡∏≤**: `seenMaterialIds = new Set()`
2. **‡∏ß‡∏ô loop ‡∏ú‡πà‡∏≤‡∏ô BOM items**: 
   - ‡∏´‡∏≤‡∏Å `material_id` ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏´‡πá‡∏ô ‚Üí ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏Ç‡πâ‡∏≤ `uniqueBom`
   - ‡∏´‡∏≤‡∏Å `material_id` ‡πÄ‡∏´‡πá‡∏ô‡πÅ‡∏•‡πâ‡∏ß ‚Üí ‡∏Ç‡πâ‡∏≤‡∏° (log duplicate)
3. **‡πÉ‡∏ä‡πâ uniqueBom**: ‡πÅ‡∏ó‡∏ô original BOM array

### ‡∏Ç‡πâ‡∏≠‡∏î‡∏µ:
- ‚úÖ ‡∏Å‡∏£‡∏≠‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ã‡πâ‡∏≥‡πÑ‡∏î‡πâ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏°‡∏µ‡∏õ‡∏£‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏†‡∏≤‡∏û
- ‚úÖ ‡πÄ‡∏Å‡πá‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÅ‡∏£‡∏Å‡∏ó‡∏µ‡πà‡∏û‡∏ö (FG priority)
- ‚úÖ ‡πÑ‡∏°‡πà‡∏Å‡∏£‡∏∞‡∏ó‡∏ö Backend logic
- ‚úÖ Debug ‡πÑ‡∏î‡πâ‡∏á‡πà‡∏≤‡∏¢‡∏î‡πâ‡∏ß‡∏¢ console.logs
