# р╣Бр╕Бр╣Йр╣Др╕Вр╕Ыр╕▒р╕Нр╕лр╕▓ Deduplication р╕Чр╕╡р╣Ир╣Др╕бр╣Ир╕Чр╕│р╕Зр╕▓р╕Щ

## ЁЯФН **р╕Ыр╕▒р╕Нр╕лр╕▓р╕Чр╕╡р╣Ир╕Юр╕Ъ**

### р╕Ир╕▓р╕Б Console Logs:
```
Original BOM items: 11
Unique BOM items: 11  тЖР р╣Др╕бр╣Ир╣Др╕Фр╣Йр╕ер╕Ър╕нр╕░р╣Др╕гр╣Ар╕ер╕в!
Removed 0 duplicate items
```

**Deduplication logic р╣Ар╕Фр╕┤р╕бр╣Др╕бр╣Ир╕Чр╕│р╕Зр╕▓р╕Щ** р╕вр╕▒р╕Зр╕бр╕╡р╕гр╕лр╕▒р╕кр╕Лр╣Йр╕│:
- **р╣Бр╕Цр╕зр╕Чр╕╡р╣И 1**: Type `I` р╕гр╕лр╕▒р╕к `235073` (р╕Щр╣Йр╕│р╕Ир╕┤р╣Йр╕бр╕кр╕╕р╕Бр╕╡р╣Й)
- **р╣Бр╕Цр╕зр╕Чр╕╡р╣И 7**: Type `O` р╕гр╕лр╕▒р╕к `235073` (р╕Щр╣Йр╕│р╕Ир╕┤р╣Йр╕бр╕кр╕╕р╕Бр╕╡р╣Й)

## тЬЕ **р╕Бр╕▓р╕гр╣Бр╕Бр╣Йр╣Др╕Вр╕Чр╕╡р╣Ир╕Чр╕│**

### р╕Ыр╕гр╕▒р╕Ър╕Ыр╕гр╕╕р╕З Deduplication Logic р╣Бр╕Ър╕Ър╣Гр╕лр╕бр╣И

```javascript
// тЭМ р╣Ар╕Фр╕┤р╕б - р╣Гр╕Кр╣Й Set р╣Бр╕Ър╕Ър╕Шр╕гр╕гр╕бр╕Фр╕▓
const uniqueBom = [];
const seenMaterialIds = new Set();

bom.forEach(item => {
    if (!seenMaterialIds.has(item.material_id)) {
        seenMaterialIds.add(item.material_id);
        uniqueBom.push(item);
    }
});

// тЬЕ р╣Гр╕лр╕бр╣И - р╣Гр╕Кр╣Й Map р╣Бр╕ер╕░ Priority-based Logic
let uniqueBom = [];
const materialIdMap = new Map(); // р╣Ар╕Бр╣Зр╕Ъ material_id р╣Бр╕ер╕░ priority (FG > Raw Material)

// р╕Ьр╣Ир╕▓р╕Щ 1: р╣Ар╕Бр╣Зр╕Ъ FG р╕Бр╣Ир╕нр╕Щ (priority р╕кр╕╣р╕З)
bom.forEach(item => {
    if (item.is_fg) {
        materialIdMap.set(item.material_id, item);
        console.log(`Added FG: ${item.material_id} (${item.Mat_Name})`);
    }
});

// р╕Ьр╣Ир╕▓р╕Щ 2: р╣Ар╕Бр╣Зр╕Ъ Raw Material р╣Ар╕Йр╕Юр╕▓р╕░р╕Чр╕╡р╣Ир╣Др╕бр╣Ир╕Лр╣Йр╕│р╕Бр╕▒р╕Ъ FG
bom.forEach(item => {
    if (!item.is_fg && !materialIdMap.has(item.material_id)) {
        materialIdMap.set(item.material_id, item);
        console.log(`Added Raw Material: ${item.material_id} (${item.Mat_Name})`);
    } else if (!item.is_fg && materialIdMap.has(item.material_id)) {
        console.log(`Skipped duplicate Raw Material: ${item.material_id} (${item.Mat_Name})`);
    }
});

// р╣Бр╕Ыр╕ер╕З Map р╕Бр╕ер╕▒р╕Ър╣Ар╕Ыр╣Зр╕Щ Array
uniqueBom = Array.from(materialIdMap.values());
```

## ЁЯОп **р╕Бр╕▓р╕гр╕Чр╕│р╕Зр╕▓р╕Щр╕Вр╕нр╕З Algorithm р╣Гр╕лр╕бр╣И**

### Priority-based Deduplication:

#### 1. **р╕Ьр╣Ир╕▓р╕Щр╣Бр╕гр╕Б - р╣Ар╕Бр╣Зр╕Ъ FG р╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Ф**
```
Added FG: 235073 (р╕Щр╣Йр╕│р╕Ир╕┤р╣Йр╕бр╕кр╕╕р╕Бр╕╡р╣Й)  тЖР р╣Ар╕Бр╣Зр╕Ър╣Др╕зр╣Й
```

#### 2. **р╕Ьр╣Ир╕▓р╕Щр╕Чр╕╡р╣Ир╕кр╕нр╕З - р╣Ар╕Бр╣Зр╕Ъ Raw Material р╕Чр╕╡р╣Ир╣Др╕бр╣Ир╕Лр╣Йр╕│**
```
Added Raw Material: 507003 (р╕Бр╕гр╕░р╣Ар╕Чр╕╡р╕вр╕бр╣Бр╕Бр╕░р╕Бр╕ер╕╡р╕Ъ - CT)
Added Raw Material: 411045 (р╕Бр╕гр╕░р╣Ар╕Чр╕╡р╕вр╕бр╕Фр╕нр╕Зр╣Бр╕бр╣Ир╕Ир╕┤р╕Щр╕Хр╣М ( р╕Щр╣Йр╕│ ) - CT)
...
Skipped duplicate Raw Material: 235073 (р╕Щр╣Йр╕│р╕Ир╕┤р╣Йр╕бр╕кр╕╕р╕Бр╕╡р╣Й)  тЖР р╕Вр╣Йр╕▓р╕б
```

#### 3. **р╕Ьр╕ер╕ер╕▒р╕Юр╕Шр╣Мр╕кр╕╕р╕Фр╕Чр╣Йр╕▓р╕в**
- **р╣Ар╕Бр╣Зр╕Ъ FG**: Type `I` р╕гр╕лр╕▒р╕к `235073` р╕Юр╕гр╣Йр╕нр╕бр╕Вр╣Йр╕нр╕бр╕╣р╕е (р╕Ир╕│р╕Щр╕зр╕Щ, р╕лр╕Щр╣Ир╕зр╕вр╣Гр╕лр╕Нр╣И, р╕Др╣Ир╕▓р╣Бр╕Ыр╕ер╕З, р╕гр╕▓р╕Др╕▓)
- **р╕Вр╣Йр╕▓р╕б Raw Material**: Type `O` р╕гр╕лр╕▒р╕к `235073` р╕Чр╕╡р╣Ир╕Лр╣Йр╕│

## ЁЯзк **р╕Бр╕▓р╕гр╕Чр╕Фр╕кр╕нр╕Ър╕лр╕ер╕▒р╕Зр╣Бр╕Бр╣Йр╣Др╕В**

### 1. р╣Ар╕Ыр╕┤р╕Фр╕лр╕Щр╣Йр╕▓ http://localhost:3014/inventory
### 2. р╣Ар╕ер╕╖р╕нр╕Бр╕Зр╕▓р╕Щ 235073 (р╕Щр╣Йр╕│р╕Ир╕┤р╣Йр╕бр╕кр╕╕р╕Бр╕╡р╣Й)
### 3. р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ Console Logs:

#### A. FG Priority
```
Added FG: 235073 (р╕Щр╣Йр╕│р╕Ир╕┤р╣Йр╕бр╕кр╕╕р╕Бр╕╡р╣Й)
```

#### B. Raw Material Processing
```
Added Raw Material: 507003 (р╕Бр╕гр╕░р╣Ар╕Чр╕╡р╕вр╕бр╣Бр╕Бр╕░р╕Бр╕ер╕╡р╕Ъ - CT)
Added Raw Material: 411045 (р╕Бр╕гр╕░р╣Ар╕Чр╕╡р╕вр╕бр╕Фр╕нр╕Зр╣Бр╕бр╣Ир╕Ир╕┤р╕Щр╕Хр╣М ( р╕Щр╣Йр╕│ ) - CT)
...
Skipped duplicate Raw Material: 235073 (р╕Щр╣Йр╕│р╕Ир╕┤р╣Йр╕бр╕кр╕╕р╕Бр╕╡р╣Й)
```

#### C. Final Result
```
Original BOM items: 11
Unique BOM items: 10
Removed 1 duplicate items
```

### 4. р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕Бр╕▓р╕гр╣Бр╕кр╕Фр╕Зр╕Вр╣Йр╕нр╕бр╕╣р╕е:
- тЬЕ р╣Др╕бр╣Ир╕бр╕╡р╣Бр╕Цр╕зр╕Чр╕╡р╣И 7 р╕гр╕лр╕▒р╕к `235073` Type `O` р╕нр╕╡р╕Бр╣Бр╕ер╣Йр╕з
- тЬЕ р╣Бр╕кр╕Фр╕З 10 р╕гр╕▓р╕вр╕Бр╕▓р╕гр╣Бр╕Чр╕Щ 11 р╕гр╕▓р╕вр╕Бр╕▓р╕г
- тЬЕ р╣Бр╕Цр╕з Type `I` р╕гр╕лр╕▒р╕к `235073` р╣Бр╕кр╕Фр╕Зр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Др╕гр╕Ъ (р╕Ир╕│р╕Щр╕зр╕Щ, р╕лр╕Щр╣Ир╕зр╕вр╣Гр╕лр╕Нр╣И, р╕Др╣Ир╕▓р╣Бр╕Ыр╕ер╕З, р╕гр╕▓р╕Др╕▓)

## ЁЯУБ **р╣Др╕Яр╕ер╣Мр╕Чр╕╡р╣Ир╣Бр╕Бр╣Йр╣Др╕В**

1. **frontend/src/pages/InventoryData.js**
   - р╕Ыр╕гр╕▒р╕Ър╕Ыр╕гр╕╕р╕З deduplication logic р╣Гр╕Кр╣Й Map р╣Бр╕Чр╕Щ Set
   - р╣Гр╕Кр╣Й priority-based approach (FG > Raw Material)
   - р╣Ар╕Юр╕┤р╣Ир╕б console.logs р╕кр╕│р╕лр╕гр╕▒р╕Ъ debug

## тЪая╕П **р╕лр╕бр╕▓р╕вр╣Ар╕лр╕Хр╕╕**

- р╕Бр╕▓р╕гр╣Бр╕Бр╣Йр╣Др╕Вр╕Щр╕╡р╣Йр╕Ир╕░р╣Гр╕лр╣Йр╕Др╕зр╕▓р╕бр╕кр╕│р╕Др╕▒р╕Нр╕Бр╕▒р╕Ъ FG р╕бр╕▓р╕Бр╕Бр╕зр╣Ир╕▓ Raw Material
- р╕лр╕▓р╕Б material_id р╕Лр╣Йр╕│р╕Бр╕▒р╕Щ р╕Ир╕░р╣Ар╕Бр╣Зр╕Ър╣Ар╕Йр╕Юр╕▓р╕░ FG р╣Бр╕ер╕░р╕Вр╣Йр╕▓р╕б Raw Material
- FG р╕Ир╕░р╣Бр╕кр╕Фр╕Зр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Др╕гр╕Ър╕Цр╣Йр╕зр╕Щ (р╕Ир╕│р╕Щр╕зр╕Щ, р╕лр╕Щр╣Ир╕зр╕вр╣Гр╕лр╕Нр╣И, р╕Др╣Ир╕▓р╣Бр╕Ыр╕ер╕З, р╕гр╕▓р╕Др╕▓)

## ЁЯОп **р╕Ьр╕ер╕ер╕▒р╕Юр╕Шр╣М**

р╕лр╕ер╕▒р╕Зр╕гр╕╡р╣Ар╕Яр╕гр╕Кр╕лр╕Щр╣Йр╕▓р╣Ар╕зр╣Зр╕Ъ:
- тЬЕ р╣Др╕бр╣Ир╕бр╕╡р╕гр╕▓р╕вр╕Бр╕▓р╕гр╕Лр╣Йр╕│
- тЬЕ FG р╣Бр╕кр╕Фр╕Зр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Др╕гр╕Ър╕Цр╣Йр╕зр╕Щ
- тЬЕ Raw Materials р╕Чр╕╡р╣Ир╣Др╕бр╣Ир╕Лр╣Йр╕│р╣Бр╕кр╕Фр╕Зр╕Хр╕▓р╕бр╕Ыр╕Бр╕Хр╕┤
- тЬЕ р╕Ир╕│р╕Щр╕зр╕Щр╕гр╕▓р╕вр╕Бр╕▓р╕гр╕ер╕Фр╕ер╕Зр╕Ир╕▓р╕Б 11 р╣Ар╕Ыр╣Зр╕Щ 10

