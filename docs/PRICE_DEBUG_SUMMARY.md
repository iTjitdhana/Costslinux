# ‡∏™‡∏£‡∏∏‡∏õ‡∏Å‡∏≤‡∏£ Debug ‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏£‡∏≤‡∏Ñ‡∏≤‡πÑ‡∏°‡πà‡πÅ‡∏™‡∏î‡∏á

## üîç **‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ó‡∏µ‡πà‡∏û‡∏ö**

### ‡∏£‡∏≤‡∏Ñ‡∏≤/‡∏´‡∏ô‡πà‡∏ß‡∏¢(‡∏£‡∏≤‡∏Ñ‡∏≤‡∏Å‡∏•‡∏≤‡∏á) ‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏õ‡πá‡∏ô `0` ‡∏´‡∏£‡∏∑‡∏≠ `-` ‡∏ó‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà API ‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô‡∏£‡∏≤‡∏Ñ‡∏≤‡πÑ‡∏î‡πâ

## ‚úÖ **‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ó‡∏µ‡πà‡∏ó‡∏≥**

### 1. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö API Backend
- ‚úÖ **API `/api/prices/latest-batch` ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡∏õ‡∏Å‡∏ï‡∏¥**
- ‚úÖ **Database ‡∏°‡∏µ‡∏£‡∏≤‡∏Ñ‡∏≤‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö material_id ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î**
- ‚úÖ **API ‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô‡∏£‡∏≤‡∏Ñ‡∏≤‡πÑ‡∏î‡πâ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á**

### 2. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• BOM
```json
{
  "Raw_Code": "411022",
  "material_id": 17,  // ‚Üê ‡πÉ‡∏ä‡πâ‡πÉ‡∏ô BOM mapping
  "Mat_Name": "‡∏ô‡πâ‡∏≥‡∏°‡∏±‡∏ô‡∏á‡∏≤ ‡∏ï‡∏£‡∏≤‡∏°‡∏±‡∏á‡∏Å‡∏£‡∏Ñ‡∏π‡πà 2,840 ‡∏Å‡∏£‡∏±‡∏° - CT"
}
```

### 3. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏£‡∏≤‡∏Ñ‡∏≤
```json
{
  "material_id": 411022,  // ‚Üê Raw_Code ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô
  "material_name": "‡∏ô‡πâ‡∏≥‡∏°‡∏±‡∏ô‡∏á‡∏≤ ‡∏ï‡∏£‡∏≤‡∏°‡∏±‡∏á‡∏Å‡∏£‡∏Ñ‡∏π‡πà 2,840 ‡∏Å‡∏£‡∏±‡∏° - CT",
  "price_per_unit": "232.140000"
}
```

### 4. ‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç Material ID Mapping
```javascript
// ‚úÖ ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÅ‡∏•‡πâ‡∏ß - ‡πÉ‡∏ä‡πâ Raw_Code ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Raw Materials
material_id: (item.is_fg === '1' || item.is_fg === 1) ? item.Mat_Id : item.Raw_Code
```

## üß™ **‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö API**

### BOM Data (job 235073)
- **235073** (‡∏ô‡πâ‡∏≥‡∏à‡∏¥‡πâ‡∏°‡∏™‡∏∏‡∏Å‡∏µ‡πâ): 75.23 ‡∏ö‡∏≤‡∏ó/‡∏Å‡∏Å.
- **411022** (‡∏ô‡πâ‡∏≥‡∏°‡∏±‡∏ô‡∏á‡∏≤): 232.14 ‡∏ö‡∏≤‡∏ó/‡∏Å‡∏Å.
- **413012** (‡∏ô‡πâ‡∏≥‡∏ï‡∏≤‡∏•): 25.24 ‡∏ö‡∏≤‡∏ó/‡∏Å‡∏Å.
- **416004** (‡∏ã‡∏≠‡∏™‡∏û‡∏£‡∏¥‡∏Å): 47.50 ‡∏ö‡∏≤‡∏ó/‡∏Å‡∏Å.
- **411019** (‡∏ô‡πâ‡∏≥‡∏õ‡∏•‡∏≤): 42.85 ‡∏ö‡∏≤‡∏ó/‡∏Å‡∏Å.
- **411044** (‡∏Å‡∏£‡∏∞‡πÄ‡∏ó‡∏µ‡∏¢‡∏°‡∏î‡∏≠‡∏á): 74.22 ‡∏ö‡∏≤‡∏ó/‡∏Å‡∏Å.
- **411045** (‡∏Å‡∏£‡∏∞‡πÄ‡∏ó‡∏µ‡∏¢‡∏°‡∏î‡∏≠‡∏á): 92.78 ‡∏ö‡∏≤‡∏ó/‡∏Å‡∏Å.
- **230015** (‡∏á‡∏≤‡∏Ç‡∏≤‡∏ß): 120.00 ‡∏ö‡∏≤‡∏ó/‡∏Å‡∏Å.
- **507003** (‡∏Å‡∏£‡∏∞‡πÄ‡∏ó‡∏µ‡∏¢‡∏°): 111.00 ‡∏ö‡∏≤‡∏ó/‡∏Å‡∏Å.
- **507074** (‡∏£‡∏≤‡∏Å‡∏ú‡∏±‡∏Å‡∏ä‡∏µ): 190.00 ‡∏ö‡∏≤‡∏ó/‡∏Å‡∏Å.
- **207010** (‡∏û‡∏£‡∏¥‡∏Å‡∏Ç‡∏µ‡πâ‡∏´‡∏ô‡∏π): 86.00 ‡∏ö‡∏≤‡∏ó/‡∏Å‡∏Å.

## üîß **‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ó‡∏µ‡πà‡∏ó‡∏≥**

### 1. ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç Material ID Mapping
```javascript
// ‚ùå ‡πÄ‡∏î‡∏¥‡∏°
material_id: (item.is_fg === '1' || item.is_fg === 1) ? item.Mat_Id : item.material_id

// ‚úÖ ‡πÉ‡∏´‡∏°‡πà
material_id: (item.is_fg === '1' || item.is_fg === 1) ? item.Mat_Id : item.Raw_Code
```

### 2. ‡πÄ‡∏û‡∏¥‡πà‡∏° Console Logs ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Debug
```javascript
// ‡πÉ‡∏ô loadLatestPricesForMaterials
console.log('Loading prices for material_ids:', ids);
console.log('API response:', res);
console.log('Price rows:', rows);
console.log('Loaded prices map:', map);

// ‡πÉ‡∏ô useEffect
console.log('useEffect triggered, fields:', fields);
console.log('useEffect materialIds:', materialIds);

// ‡πÉ‡∏ô price display
console.log(`Price for material_id ${field.material_id}:`, p, 'latestPrices:', latestPrices);
```

## üéØ **‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡∏ó‡∏µ‡πà‡∏Ñ‡∏≤‡∏î‡∏´‡∏ß‡∏±‡∏á**

### ‡∏´‡∏•‡∏±‡∏á‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÅ‡∏•‡πâ‡∏ß ‡∏´‡∏ô‡πâ‡∏≤ Inventory ‡∏Ñ‡∏ß‡∏£‡πÅ‡∏™‡∏î‡∏á:
- **‡∏ô‡πâ‡∏≥‡∏à‡∏¥‡πâ‡∏°‡∏™‡∏∏‡∏Å‡∏µ‡πâ**: ‡∏£‡∏≤‡∏Ñ‡∏≤ 75.23 ‡∏ö‡∏≤‡∏ó/‡∏Å‡∏Å.
- **‡∏ô‡πâ‡∏≥‡∏°‡∏±‡∏ô‡∏á‡∏≤**: ‡∏£‡∏≤‡∏Ñ‡∏≤ 232.14 ‡∏ö‡∏≤‡∏ó/‡∏Å‡∏Å.
- **‡∏ô‡πâ‡∏≥‡∏ï‡∏≤‡∏•**: ‡∏£‡∏≤‡∏Ñ‡∏≤ 25.24 ‡∏ö‡∏≤‡∏ó/‡∏Å‡∏Å.
- **‡∏ã‡∏≠‡∏™‡∏û‡∏£‡∏¥‡∏Å**: ‡∏£‡∏≤‡∏Ñ‡∏≤ 47.50 ‡∏ö‡∏≤‡∏ó/‡∏Å‡∏Å.
- **‡∏ô‡πâ‡∏≥‡∏õ‡∏•‡∏≤**: ‡∏£‡∏≤‡∏Ñ‡∏≤ 42.85 ‡∏ö‡∏≤‡∏ó/‡∏Å‡∏Å.
- **‡∏Å‡∏£‡∏∞‡πÄ‡∏ó‡∏µ‡∏¢‡∏°‡∏î‡∏≠‡∏á**: ‡∏£‡∏≤‡∏Ñ‡∏≤ 74.22 ‡∏ö‡∏≤‡∏ó/‡∏Å‡∏Å.
- **‡∏Å‡∏£‡∏∞‡πÄ‡∏ó‡∏µ‡∏¢‡∏°‡∏î‡∏≠‡∏á**: ‡∏£‡∏≤‡∏Ñ‡∏≤ 92.78 ‡∏ö‡∏≤‡∏ó/‡∏Å‡∏Å.
- **‡∏á‡∏≤‡∏Ç‡∏≤‡∏ß**: ‡∏£‡∏≤‡∏Ñ‡∏≤ 120.00 ‡∏ö‡∏≤‡∏ó/‡∏Å‡∏Å.
- **‡∏Å‡∏£‡∏∞‡πÄ‡∏ó‡∏µ‡∏¢‡∏°**: ‡∏£‡∏≤‡∏Ñ‡∏≤ 111.00 ‡∏ö‡∏≤‡∏ó/‡∏Å‡∏Å.
- **‡∏£‡∏≤‡∏Å‡∏ú‡∏±‡∏Å‡∏ä‡∏µ**: ‡∏£‡∏≤‡∏Ñ‡∏≤ 190.00 ‡∏ö‡∏≤‡∏ó/‡∏Å‡∏Å.
- **‡∏û‡∏£‡∏¥‡∏Å‡∏Ç‡∏µ‡πâ‡∏´‡∏ô‡∏π**: ‡∏£‡∏≤‡∏Ñ‡∏≤ 86.00 ‡∏ö‡∏≤‡∏ó/‡∏Å‡∏Å.

## üìÅ **‡πÑ‡∏ü‡∏•‡πå‡∏ó‡∏µ‡πà‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç**

1. **frontend/src/pages/InventoryData.js**
   - ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç material_id mapping ‡πÉ‡∏ô‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô `loadBOMByJobCode`
   - ‡πÄ‡∏û‡∏¥‡πà‡∏° console.logs ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö debug

## üß™ **‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö**

### 1. ‡πÄ‡∏õ‡∏¥‡∏î‡∏´‡∏ô‡πâ‡∏≤ http://localhost:3014/inventory
### 2. ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏á‡∏≤‡∏ô 235073 (‡∏ô‡πâ‡∏≥‡∏à‡∏¥‡πâ‡∏°‡∏™‡∏∏‡∏Å‡∏µ‡πâ)
### 3. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Console Logs:
   - `useEffect triggered, fields: [...]`
   - `useEffect materialIds: [...]`
   - `Loading prices for material_ids: [...]`
   - `API response: {...}`
   - `Price rows: [...]`
   - `Loaded prices map: {...}`
   - `Price for material_id XXX: {...}`

### 4. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏≤‡∏Ñ‡∏≤:
   - ‡∏£‡∏≤‡∏Ñ‡∏≤/‡∏´‡∏ô‡πà‡∏ß‡∏¢(‡∏£‡∏≤‡∏Ñ‡∏≤‡∏Å‡∏•‡∏≤‡∏á) ‡∏Ñ‡∏ß‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á
   - ‡πÑ‡∏°‡πà‡∏Ñ‡∏ß‡∏£‡πÅ‡∏™‡∏î‡∏á `-` ‡∏´‡∏£‡∏∑‡∏≠ `0`

## ‚ö†Ô∏è **‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏**

- ‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ô‡∏µ‡πâ‡∏à‡∏∞‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏£‡∏≤‡∏Ñ‡∏≤‡πÅ‡∏™‡∏î‡∏á‡πÑ‡∏î‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Raw Materials ‡∏ó‡∏µ‡πà‡∏°‡∏µ Raw_Code ‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö material_id ‡πÉ‡∏ô database
- Console logs ‡∏à‡∏∞‡∏ä‡πà‡∏ß‡∏¢ debug ‡∏´‡∏≤‡∏Å‡∏¢‡∏±‡∏á‡∏°‡∏µ‡∏õ‡∏±‡∏ç‡∏´‡∏≤
- ‡∏´‡∏≤‡∏Å‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏≤‡∏Ñ‡∏≤ ‡πÉ‡∏´‡πâ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö console logs ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡∏ß‡πà‡∏≤ API ‡∏ñ‡∏π‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
